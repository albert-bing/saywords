var pdata;var i1=0,i2=15;var j1=15,j2=28;var limit_page_number=1;var question_data=new Array();$(document).ready(function(){var g;$.ajax({type:"post",url:"/partone/reqPartOne",async:true,success:function(j){pdata=j;console.log(j);i(j,i1,i2);d()},error:function(j){layer.open({type:1,offset:"auto",id:"layer"+1,content:'<div style="padding: 20px 100px;">服务器暂时无响应，请稍后再试</div>',btn:"关闭全部",btnAlign:"c",shade:0.5,yes:function(){layer.closeAll()}})}});function i(u,p,o){for(var q=p;q<o;q++){var w=document.createElement("div");if(q%2==0){w.setAttribute("style","background-color:rgba(0,150,136,0.3)")}w.setAttribute("class","tm");var r=document.createElement("p");r.append(q+1+"."+u[q].stem);w.appendChild(r);var t=document.createElement("div");t.setAttribute("class","option_AB");var k=document.createElement("div");k.setAttribute("class","op_aa");k.setAttribute("style","float: left;");var n=document.createElement("input");n.setAttribute("id","A_input"+q);n.setAttribute("name","answer"+q);n.setAttribute("class","btn");n.setAttribute("type","radio");n.setAttribute("value","1");if(u[q].ans==1){n.setAttribute("checked","checked")}var m=document.createElement("div");m.setAttribute("id","optionA"+q);m.setAttribute("style","margin-left: 5px;float: right;margin-top: 1px;cursor: pointer;");var y=document.createElement("label");y.setAttribute("for","A_input"+q);y.append("是");m.appendChild(y);k.appendChild(n);k.appendChild(m);t.appendChild(k);var j=document.createElement("div");j.setAttribute("class","op_bb");j.setAttribute("style","float: right;margin-right: 800px;");var s=document.createElement("input");s.setAttribute("id","B_input"+q);s.setAttribute("name","answer"+q);s.setAttribute("type","radio");s.setAttribute("class","btn");s.setAttribute("value","2");if(u[q].ans==2){s.setAttribute("checked","checked")}s.setAttribute("style","margin-left: 30px");t.appendChild(s);var l=document.createElement("div");l.setAttribute("id","optionB"+q);l.setAttribute("style","margin-left: 5px;float: right;margin-top: 1px;");var x=document.createElement("label");x.setAttribute("for","B_input"+q);x.append("否");l.appendChild(x);j.appendChild(s);j.appendChild(l);t.appendChild(j);var v=document.getElementById("parent");v.appendChild(w);w.appendChild(t);w.appendChild(k);w.appendChild(j)}}function c(){for(var k=i1;k<i2;k++){var j=$("input[name='answer"+k+"']:checked").val();if(j!=undefined){question_data[k]=pdata[k].code+":"+j;pdata[k].ans=j}}}function h(){$("#ans").toggle().show()}function d(){$("#ans").toggle().hide()}var f=document.getElementById("next_page");f.onclick=function(){var j=document.getElementById("parent");c();if(limit_page_number>=2){alert("已经是最后一页了。")}else{limit_page_number++;$(".tm").remove();e(pdata,j1,j2)}h()};function e(v,A,z){for(var q=A;q<z;q++){var w=document.createElement("div");if(q%2==0){w.setAttribute("style","background-color:rgba(0,150,136,0.3)")}w.setAttribute("class","tm");var r=document.createElement("p");r.append(q+1+"."+v[q].stem);w.appendChild(r);var u=document.createElement("div");u.setAttribute("class","option_AB");var m=document.createElement("div");m.setAttribute("class","op_aa");m.setAttribute("style","float: left;");var p=document.createElement("input");p.setAttribute("id","A_input"+q);p.setAttribute("name","answer"+q);p.setAttribute("type","radio");p.setAttribute("value","1");if(v[q].ans==1){p.setAttribute("checked","checked")}var o=document.createElement("div");o.setAttribute("id","optionA"+q);o.setAttribute("style","margin-left: 5px;float: right;margin-top: 1px;");var y=document.createElement("label");y.setAttribute("for","A_input"+q);y.append("是");o.appendChild(y);m.appendChild(p);m.appendChild(o);u.appendChild(m);var l=document.createElement("div");l.setAttribute("class","op_bb");l.setAttribute("style","float: right;margin-right: 800px;");var t=document.createElement("input");t.setAttribute("id","B_input"+q);t.setAttribute("name","answer"+q);t.setAttribute("type","radio");t.setAttribute("value","2");if(v[q].ans==2){t.setAttribute("checked","checked")}t.setAttribute("style","margin-left: 30px");var n=document.createElement("div");n.setAttribute("id","optionB"+q);n.setAttribute("style","margin-left: 5px;float: right;margin-top: 1px;");var x=document.createElement("label");x.setAttribute("for","B_input"+q);x.append("否");n.appendChild(x);l.appendChild(t);l.appendChild(n);u.appendChild(l);var s=document.getElementById("parent");s.appendChild(w);w.appendChild(u);w.appendChild(m);w.appendChild(l)}var k=document.getElementById("TJ");k.style.display="block"}function b(){for(var k=j1;k<j2;k++){var j=$("input[name='answer"+k+"']:checked").val();if(j!=undefined){question_data[k]=pdata[k].code+":"+j;pdata[k].ans=j}}}var a=document.getElementById("pre_page");a.onclick=function(){var j=document.getElementById("parent");b();if(limit_page_number<=1){}else{limit_page_number--;$(".tm").remove();i(pdata,i1,i2)}d()}});layui.use("element",function(){var b=layui.jquery,a=layui.element;b(document).ready(function(){var c=480;var d=0;timer=setInterval(function(){d++;if(d>100){d=100;clearInterval(timer);alert("8分钟的答题时间已到")}a.progress("demo",d+"%")},4800)})});function anwser_B(){for(var b=j1;b<j2;b++){var a=$("input[name='answer"+b+"']:checked").val();if(a!=undefined){question_data[b]=pdata[b].code+":"+a;pdata[b].ans=a}}}function anwser_A(){for(var b=i1;b<i2;b++){var a=$("input[name='answer"+b+"']:checked").val();if(a!=undefined){question_data[b]=pdata[b].code+":"+a;pdata[b].ans=a}}}function verifyPaper(){anwser_A();anwser_B();for(var a=0;a<28;a++){if(pdata[a].ans==0){layer.open({type:1,offset:"auto",id:"layer"+1,content:'<div style="padding: 20px 100px;">还有题目未完成</div>',btn:"关闭全部",btnAlign:"c",shade:0.5,yes:function(){layer.closeAll()}});return 0}}tjPaper()}function showView_c(){window.open(layer.open({type:1,offset:"auto",id:"layerDemo"+1,content:'<div style="padding: 20px 50px;line-height:30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Part 1共有28题，每个题目描述的都是人们在日常生活中的行为表现或者真实感受，请根据您最近一年的实际情况，判断自己是否具有这些特征。<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;比如：<br/><div style="border:1px black solid">1. 有时，当我独自一人的时候，也会听到别人喊我名字。<br />   &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;O是    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;    O否</div> <br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;如果这件事情在你身上曾经发生过，请点击“是”；如果没有发生过，请点击“否”。</div>',btn:"确定",btnAlign:"c",shade:0.5,area:["550px","450px"]}))}setTimeout("showView_c()",100);function showView(){layer.open({type:1,offset:"auto",id:"layerDemo"+1,content:'<div style="padding: 20px 50px;line-height:30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Part 1共有28题，每个题目描述的都是人们在日常生活中的行为表现或者真实感受，请根据您最近一年的实际情况，判断自己是否具有这些特征。<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;比如：<br/><div style="border:1px black solid">1. 有时，当我独自一人的时候，也会听到别人喊我名字。<br />   &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;O是    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;    O否</div> <br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;如果这件事情在你身上曾经发生过，请点击“是”；如果没有发生过，请点击“否”。</div>',btn:"确定",btnAlign:"c",shade:0.5,area:["550px","450px"]})}function tjPaper(){$.ajax({type:"post",url:"http://localhost:9999/partone/submitPaper",async:true,data:JSON.stringify(question_data),dataType:"json",success:function(a){if(a.code==0){layer.open({type:1,offset:"auto",id:"layerDemo"+1,content:'<div style="padding: 20px 100px;">交卷成功,请勿重复提交。Part 1测试已结束，请您继续完成Part 2测试。</div>',btn:"确定",btnAlign:"c",shade:0.5,yes:function(){layer.closeAll();location.href="http://localhost:9999/parttwo"}})}else{layer.open({type:1,offset:"auto",id:"layerDemo"+1,content:'<div style="padding: 20px 100px;">交卷失败，请重新提交</div>',btn:"关闭全部",btnAlign:"c",shade:0.5,yes:function(){layer.closeAll()}})}},error:function(a){layer.open({type:1,offset:"auto",id:"layerDemo"+1,content:'<div style="padding: 20px 100px;">服务器暂时无响应，请稍后提交</div>',btn:"关闭全部",btnAlign:"c",shade:0.5,yes:function(){layer.closeAll()}})}})}layui.use(["element","layer"],function(){var b=layui.element;var a=layui.layer});